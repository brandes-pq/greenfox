<?xml version="1.0" encoding="UTF-8"?>
<greenfox greenfoxURI="http://www.greenfox.org/ns/schema-examples/expression-value01"
          xmlns="http://www.greenfox.org/ns/schema">

    <!-- *** External context *** -->
    <context>
        <field name="lastModified" value="2019-12-01"/>
    </context>    
    
    <domain path="\tt\greenfox\test\data\niem" 
            name="expression-value01">    
        
        <!-- *** System root folder shape *** -->
        <folder foxpath="." id="dataFolderShape">
            
            <!-- *** XSD folder shape -->
            <file foxpath=".\(niem-core.xsd, niem-core-manipulated.xsd)" id="niemCoreXsdShape">
                <targetSize msg="niem-core XSD not found" count="2"/>
                <!-- eq, ne - case OK -->                
                <xpath expr="*/@targetNamespace" eq="http://release.niem.gov/niem/niem-core/4.0/"
                       eqMsg="NOTOK: unexpected namespace"
                       eqMsgOK="OK: expected namespace"
                       deactivated="false"/>
                <xpath expr="*/@targetNamespace" ne="http://release.niem.gov/niem/niem-core/3.0/"
                    neMsg="NOTOK: stale namespace"
                    neMsgOK="OK: not any more old namespace"
                    deactivated="false"/>
                <!-- in - case OK -->                
                <xpath expr="xs:schema/xs:annotation/xs:appinfo/*:LocalTerm/@term"
                    inMsg="NOTOK: unexpected LocalTerm - not in in list"
                    inMsgOK="OK: expected LocalTerms - in in list"
                    deactivated="false">
                    <in>
                        <eq>GSM</eq>
                        <eq>UTC</eq>
                        <eq>UMTS</eq>
                        <eq>SSN</eq>
                        <eq>ISO</eq>
                        <eq>Alpha3</eq>
                        <eq>Alpha2</eq>
                        <eq>2D</eq>
                        <eq>3D</eq>
                        <eq>IMEI</eq>
                        <eq>DEA</eq>
                        <eq>UTM</eq>
                        <eq>ESN</eq>
                        <eq>FIPS</eq>
                        <eq>NANP</eq>
                        <eq>GENC</eq>
                        <eq>MAC</eq>                    
                        <eq>CMV</eq>
                    </in>
                </xpath>
                <xpath expr="xs:schema/xs:annotation/xs:appinfo/*:LocalTerm/@term"
                    notinMsg="NOTOK: unexpected LocalTerm - in notin list"
                    notinMsgOK="OK: expected LocalTerms - not in notin list"
                    deactivated="false">
                    <notin>
                        <eq>ERROR</eq>
                        <eq>FAILURE</eq>
                    </notin>
                </xpath>

                <xpath expr="xs:schema/@version"
                    ltMsg="NOTOK: unexpected version not lt 2"
                    ltMsgOK="OK: version lt 2"
                    lt="2"
                    useDatatype="xs:decimal"
                    deactivated="false"/>
                <xpath expr="xs:schema//@minOccurs"
                    ltMsg="NOTOK: unexpected minOccurs not lt 3"
                    ltMsgOK="OK: minOccurs lt 3"
                    lt="3"
                    useDatatype="xs:decimal"
                    deactivated="false"/>

                <xpath expr="xs:schema/@version"
                    leMsg="NOTOK: unexpected version not le 2"
                    leMsgOK="OK: version le 2"
                    le="2"
                    useDatatype="xs:decimal"
                    deactivated="false"/>
                <xpath expr="xs:schema//@minOccurs"
                    leMsg="NOTOK: unexpected minOccurs not le 3"
                    leMsgOK="OK: minOccurs lt 3"
                    le="3"
                    useDatatype="xs:decimal"
                    deactivated="false"/>

                <xpath expr="xs:schema//@minOccurs"
                    gtMsg="NOTOK: version not > -0.01"
                    gtMsgOK="OK: version > -0.01"
                    gt="-0.01"
                    useDatatype="xs:decimal"
                    deactivated="false"/>
                <xpath expr="xs:schema//@minOccurs"
                    geMsg="NOTOK: version not >= 0"
                    geMsgOK="OK: version >= 0"
                    ge="0"
                    useDatatype="xs:decimal"
                    deactivated="false"/>
                <xpath expr="xs:schema/xs:annotation/xs:appinfo/*:LocalTerm/@term"
                    matchesMsg="NOTOK: local term with unexpected characters"
                    matchesMsgOK="OK: local terms with expected characters"
                    matches="^[a-z0-9]+$"
                    flags="i"
                    deactivated="false"/>
                <xpath expr="xs:schema//xs:complexType/@name"
                    notMatchesMsg="NOTOK: type name with suffix after 'Type'"
                    notMatchesMsgOK="OK: type name without suffix after 'Type'"
                    notMatches="Type.+$"
                    deactivated="false"/>
                <xpath expr="xs:schema/xs:annotation/xs:documentation"
                    likeMsg="NOTOK: schema documentation does not starts with 'NIEM'"
                    likeMsgOK="OK: schema documentation starts with 'NIEM'"
                    like="niem*$"
                    flags="i"
                    deactivated="false"/>
                <xpath expr="xs:schema//@schemaLocation"
                    notLikeMsg="NOTOK: schema location starts with http:"
                    notLikeMsgOK="OK: schema location does not start with http:"
                    notLike="http:*"
                    flags="i"
                    deactivated="false"/>
                <xpath expr="xs:schema/xs:annotation/xs:documentation"
                    countMsg="NOTOK: schema component has not one documentation item"
                    countMsgOK="OK: schema component has one documentation item"
                    count="1"
                    deactivated="false"/>
                <xpath expr="xs:schema/xs:annotation/xs:appinfo/*:LocalTerm/@term[matches(., '^\dD$')]"
                    minCountMsg="NOTOK: schema must have at least two iD local terms"
                    minCountMsgOK="OK: schema has at least two iD local terms"
                    minCount="2"
                    deactivated="false"/>
                <xpath expr="xs:schema/xs:annotation/xs:appinfo/*:LocalTerm/@term[starts-with(., 'GSM')]"
                    maxCountMsg="NOTOK: schema must not have more than one GSM local term"
                    maxCountMsgOK="OK: schema has not more than one GSM local term"
                    maxCount="1"
                    deactivated="false"/>
                
                <xpath expr="//xs:complexType[@name eq 'ActivityDocumentAssociationType']/xs:annotation/xs:documentation/substring(., 1, 30)"
                    eqXPathMsg="NOTOK: beginning of type docum text is not equal"
                    eqXPathMsgOK="OK: beginning of type docum text is equal"
                    eqXPath="//xs:complexType[@name eq 'ActivityFacilityAssociationType']/xs:annotation/xs:documentation/substring(., 1, 30)"
                    deactivated="false"/>

                <xpath expr="//xs:complexType[@name eq 'ActivityDocumentAssociationType']/descendant::xs:element[1]/@maxOccurs"
                    eqXPathContext="#item"
                    eqXPathMsg="NOTOK: maxOccurs not equal (context=#item)"
                    eqXPathMsgOK="OK: maxOccurs equal (context=#item)"
                    eqXPath="../../xs:element[2]/@maxOccurs"
                    deactivated="false"/>

                <xpath expr="//@minOccurs"
                    leXPathContext="#item"
                    leXPathMsg="NOTOK: minOccurs not less-or-equal (context=#item)"
                    leXPathMsgOK="OK: minOccurs less-or-equal (context=#item)"
                    leXPath="(../@maxOccurs/replace(., 'unbounded', '99'), '99')[1] ! xs:integer(.)"
                    useDatatype="xs:integer"
                    deactivated="false"/>

                <xpath expr="//@maxOccurs[../@minOccurs][. ne 'unbounded']"
                    geXPathContext="#item"
                    geXPathMsg="NOTOK: maxOccurs not greater-or-equal minOccurs (context=#item)"
                    geXPathMsgOK="OK: maxOccurs greater-or-equal minOccurs (context=#item)"
                    geXPath="../@minOccurs"
                    useDatatype="xs:integer"
                    deactivated="false"/>
                
                <xpath expr="//@maxOccurs[../@minOccurs][. ne 'unbounded']"
                    gtXPathContext="#item"
                    gtXPathMsg="NOTOK: maxOccurs not greater minOccurs (context=#item)"
                    gtXPathMsgOK="OK: maxOccurs greater minOccurs (context=#item)"
                    gtXPath="../@minOccurs/xs:integer(.) - 2"
                    useDatatype="xs:integer"
                    deactivated="false"/>

                <xpath expr="//xs:minInclusive[../xs:maxInclusive]/@value"
                    ltXPathContext="#item"
                    ltXPathMsg="NOTOK: minInclusive not lt maxInclusive (context=#item)"
                    ltXPathMsgOK="OK: minInclusive lt maxInclusive (context=#item)"
                    ltXPath="../../xs:maxInclusive/@value"
                    useDatatype="xs:integer"
                    deactivated="false"/>
                
                <xpath expr="xs:schema/xs:annotation/xs:appinfo/*:LocalTerm[@literal, @definition]/@term"
                    containsXPathMsg="NOTOK: local terms with literal do not contain all local terms"
                    containsXPathMsgOK="OK: local terms with literal contain all local terms"
                    containsXPath="xs:schema/xs:annotation/xs:appinfo/*:LocalTerm/@term"
                    deactivated="false"/>
                
                <xpath expr="xs:schema/@version"
                    eqFoxpathMsg="NOTOK: unexpected version, not eq shadow version"
                    eqFoxpathMsgOK="OK: version eq shadow version"
                    eqFoxpath="..\niem-core.xsd/xs:schema/@version"
                    useDatatype="xs:decimal"                    
                    deactivated="false"/>
                <xpath expr="xs:schema/@version"
                    ltFoxpathMsg="NOTOK: unexpected version, not lt incremented shadow version"
                    ltFoxpathMsgOK="OK: version lt incremented shadow version"
                    ltFoxpath="..\niem-core.xsd/xs:schema/@version/xs:decimal(.) + 1"
                    useDatatype="xs:decimal"                    
                    deactivated="false"/>
                <xpath expr="xs:schema/@version"
                    leFoxpathMsg="NOTOK: unexpected version, not le incremented shadow version"
                    leFoxpathMsgOK="OK: version le incremented shadow version"
                    leFoxpath="..\niem-core.xsd/xs:schema/@version/xs:decimal(.) + 0"
                    useDatatype="xs:decimal"                    
                    deactivated="false"/>
                <xpath expr="xs:schema/@version"
                    gtFoxpathMsg="NOTOK: unexpected version, not gt decremented shadow version"
                    gtFoxpathMsgOK="OK: version gt decremented shadow version"
                    gtFoxpath="..\niem-core.xsd/xs:schema/@version/xs:decimal(.) - 1"
                    useDatatype="xs:decimal"                    
                    deactivated="false"/>
                <xpath expr="xs:schema/@version"
                    geFoxpathMsg="NOTOK: unexpected version, not ge decremented shadow version"
                    geFoxpathMsgOK="OK: version ge decremented shadow version"
                    geFoxpath="..\niem-core.xsd/xs:schema/@version/xs:decimal(.) - 0"
                    useDatatype="xs:decimal"                    
                    deactivated="false"/>
                
            </file>            
        </folder>   
    </domain>    
</greenfox>

