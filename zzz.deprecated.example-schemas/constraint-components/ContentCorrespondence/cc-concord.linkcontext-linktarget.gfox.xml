<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    Demonstrates the use of constraint component Concord (ContentCorrespondence). 
    
    In this example, a link context is used (@contextXP) and link target nodes are selected 
    (@targetXP). The correspondence is checked for each pair of link context node and link 
    target node.
    
    Additional constraints refer to the number of items returned by the expressions whose results
    are compared (@countSource, @countTarget).
-->
<greenfox greenfoxURI="http://www.greenfox.org/ns/schema-examples/demo-constraint-component/concord.linkcontext-linktarget"
          xmlns="http://www.greenfox.org/ns/schema">

    <context>
        <field name="domain" value="${schemaPath}\..\..\..\..\example-data"/>
    </context>

    <domain path="${domain}" name="greenfox-example-data">
        <folder foxpath="msgs1\response" id="responseFolderShape">
            <targetSize countMsg="Missing folder: msgs1\response" count="1"/>            
            <file foxpath="*.xml" id="responseFileShape">
                <targetSize minCount="1" minCountMsg="Response folder without response files"/>
                <contentCorrespondence foxpath="fox-parent-sibling('expectation')\expectation-articles.xml"
                                       contextXP="//article"
                                       targetXP="//article[@id eq $linkContext/articleID]"
                                       minCountContextNodes="1"
                                       minCountTargetNodes="1">
                    <valueCord sourceXP="articleName" targetXP="@name" countSource="1" countTarget="1" cmp="eq"/>
                    <valueCord sourceXP="articlePrice" targetXP="@price" useDatatype="xs:decimal" countSource="1" countTarget="1" cmp="eq"/>
                </contentCorrespondence>
            </file>
        </folder>
    </domain>

</greenfox>
