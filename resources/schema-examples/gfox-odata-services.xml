<?xml version="1.0" encoding="UTF-8"?>
<greenFox xmlns="http://www.greenfox.org/ns/schema" greenfoxURI="http://www.greenfox.org/ns/schema-examples">
    <context>
        <field name="revision" value="12"/>
        <field name="folderPostfix" value=""/>"
        <field name="fex" value=".edmx"/>
    </context>
    
    <domain path="\projects\sap\projects\odata" label="main">
        
        <folder foxpath="services${folderPostfix}" count="1">
            
            <file foxpath="*${fex}" minCount="100">
                <!-- *** Constraint:
                     Kind:      xpath
                     Semantics: @Type on <Property> has a value starting with 'Edm.' 
                 -->                
                <xpath label="Only simple property types" count="0" deactivated="true"
                    expr="//*:Property/@Type[not(starts-with(., 'Edm.'))] => distinct-values() => sort()"
                />
                
                <!-- *** Constraint:
                     Kind:      xpath
                     Semantics: There are no occurrences of <EnumType>. 
                 -->                
                <xpath label="No enumeration types" eq="0" 
                    expr="//*:EnumType/@Name => count()"
                />            
                
            </file>
            
            <file foxpath="*.${fex}[//*:ComplexType]" count="0">
                
                <!-- *** Constraint:
                     Kind:      xpath
                     Semantics: ComplexType must not be referenced by attributes except for @ReturnType 
                 -->                
                <xpath eq="ReturnType" expr="
(for $ctypeName in //*:ComplexType/@Name => distinct-values()
 return //(* except *:ComplexType)/@*[matches(., '^(.*\.)?' || $ctypeName || '$')]/local-name(.)
) => distinct-values() => sort()" 
                />
                
            </file>
        </folder>
    </domain>
</greenFox>
