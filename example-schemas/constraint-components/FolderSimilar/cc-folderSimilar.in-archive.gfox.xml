<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    Demonstrates the use of constraint component FolderSimilar. This example checks resources contained by 
    archive files.
    
    Constraint components:
    * Name:  FolderSimilar
    - XML:   folderSimilar/(@otherFoxpath, skipFiles*, skipFolders*, skipForeignFiles*, skipForeignFolders*)
    - Check: The current folder contains the same folders and files as other folder(s) selected by the
             Foxpath expression, taking into consideration exceptions defined by child elements <skipFiles>,
             <skipFolders>, <skipForeignFiles>, <skipForeignFolders>.
             
    * Name:  FolderSimilarCount
    - XML:   folderSimilar/@count
    - Check: The number of folders with which to compare must be equal to the specified value
             
    * Name:  FolderSimilarMinCount
    - XML:   folderSimilar/@minCount
    - Check: The number of folders with which to compare must be greater than or equal to the specified value
             
    * Name:  FolderSimilarMaxCount
    - XML:   folderSimilar/@maxCount
    - Check: The number of folders with which to compare must be less than or equal to the specified value

    When attributes @count, @minCount or @maxCount are used, they constrain the number of folders selecgted
    by the Foxpath expression. By default, the expression must select exactly one folder.
    
    When comparing folders, files and folders contained by the current folder, but not by the folder with
    which to compare, are ignored if they match the names or name patterns specified by <skipFiles>/@names
    and <skipFolders>/@names, respectively. Similarly, files and folder contained by the folder with which
    to compare, but not by the current folder, are ignored if they match the names or name patterns specified
    by <skipForeignFiles>/@names and <skipForeignFolders>/@names, respectively.
    
    In this example, validation catches an 'airports' folder containing files or folders not contained by the
    'airports-copy' folder, ignoring airport-xxx.xml in the 'airports' folder and airport-xxx.json
    in the 'airports-copy' folder.
-->
<greenfox greenfoxURI="http://www.greenfox.org/ns/schema-examples/demo-constraint-component/folder.similar/archive"
          xmlns="http://www.greenfox.org/ns/schema">

    <context>
        <field name="domain" value="${schemaPath}\..\..\..\..\example-data"/>
    </context>
    
    <domain path="${domain}" name="greenfox-example-data">
        <folder foxpath="archives\airports.zip\#archive#\airports" id="airportsFolderShape">
            <targetSize countMsg="Missing folder: airports" count="1"/>
            <folderSimilar otherFoxpath="ancestor~::archives\airports-copy.zip\#archive#\airports-copy">
                <skipFiles names="airport-max.*"/>
                <skipForeignFolders names="user-extensions2"/>
            </folderSimilar>
        </folder>                
    </domain>

</greenfox>
