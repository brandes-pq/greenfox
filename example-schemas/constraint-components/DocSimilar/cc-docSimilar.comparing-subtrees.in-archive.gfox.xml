<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    Demonstrates the use of constraint component DocSimilar, in particular the comparison
    of selected elements of the target resource with elements found in another resource. 
    This example checks resources contained by an archive file.
    
    See example schema 'cc-docSimilar.gfox.xml' for a general explanation of the
    DocSimilar constraint.
    
    In this example, validation catches an 'airport-cgn.xml' file which does not have
    a single <airport> element, or which has an <airport> element which is not similar 
    to selected <airport> elements found in the sibling 'airports.xml' document. When
    comparing, the text content of <code> elements is normalized, and @href attributes 
    are ignored.
-->
<greenfox greenfoxURI="http://www.greenfox.org/ns/schema-examples/demo-constraint-component/doc.similar"
          xmlns="http://www.greenfox.org/ns/schema">

    <context>
        <field name="domain" value="${schemaPath}\..\..\..\..\example-data"/>
    </context>
    
    <domain path="${domain}" name="greenfox-example-data">
        <folder foxpath="archives\airports.zip\#archive#\airports" id="docSimilarFolderShape">
            <targetSize countMsg="Missing folder: airports" count="1"/>            
            <file foxpath="airport-cgn.xml" id="airportCgnFileShape">
                <targetSize countMsg="Missing file: airport-cgn.xml" count="1"/>
                <focusNode xpath="/*/airport">
                    <targetSize countMsg="Missing element: airport" count="1"/>
                    <docSimilar otherFoxpath="..\airports.xml//airport[*]" minCount="1" maxCount="100">
                        <editText localName="code" replaceSubstring="^.+$" replaceWith="XXX"/>
                        <skipItem kind="attribute" localName="href"/>
                    </docSimilar>
                </focusNode>
            </file>
        </folder>
    </domain>

</greenfox>
