<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    Demonstrates the use of constraint component ExprValueEq, using an XPath expression.
    An additional ExprValueCount constraint ensures that successful validation is not 
    possible without evaluation of the ExprValueEq constraint.
    
    This example checks resources contained by an archive file.
    
    Constraint components:
    * Name:  ExprValueEq 
    - XML:   xpath/(@expr, @eq) 
    - Check: Every item of the expression value must be equal to the value given by @eq.
    
    * Name:  ExprValueCount 
    - XML:   xpath/(@expr, @count) 
    - Check: The number of value items must be equal to the number specified by @count.
    
-->
<greenfox greenfoxURI="http://www.greenfox.org/ns/schema-examples/demo-constraint-component/xpath-value-eq/archive"
          xmlns="http://www.greenfox.org/ns/schema">

    <context>
        <field name="domain" value="${schemaPath}\..\..\..\..\..\..\example-data"/>
    </context>
    
    <domain path="${domain}" name="greenfox-example-data">
        <folder foxpath="archives\airports.zip\#archive#\airports" id="airportsFolderShape">
            <targetSize countMsg="Missing folder: airports" count="1"/>            
            <file foxpath="airports.xml" id="airportsFileShape">
                <targetSize countMsg="Missing file: airports.xml" count="1"/>
                <xpath expr="/airports/airport/@href[contains(., '-jfk')]"
                       eq="airport-jfk.xml"
                       eqMsg="Not expected airport reference"
                       count="1"
                       countMsg="Missing @href for airport 'jfk'"/>
            </file>
        </folder>
    </domain>

</greenfox>

