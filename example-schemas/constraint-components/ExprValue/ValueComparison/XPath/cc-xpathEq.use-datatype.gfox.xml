<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    Demonstrates the use of constraint component ExprValueEq, using an XPath expression.
    An additional ExprValueMinCount constraint ensures that successful validation is
    not possible without evaluation of the ExprValueEq constraint.
    
    This example uses a @useDatatype parameter: before comparing the expression value
    items with the value specified by @eq, both operands of the comparison are cast
    to the specified datatype, here xs:integer.
    
    Constraint components:
    * Name:  ExprValueEq 
    - XML:   xpath/(@expr, @eq) 
    - Check: Every item of the expression value must be equal to the value given by @eq.
    
    * Name:  ExprValueCount 
    - XML:   xpath/(@expr, @count) 
    - Check: The number of value items must be equal to the number specified by @count.
    
-->
<greenfox greenfoxURI="http://www.greenfox.org/ns/schema-examples/demo-constraint-component/xpath-value-eq.use-datatype"
          xmlns="http://www.greenfox.org/ns/schema">

    <context>
        <field name="domain" value="${schemaPath}\..\..\..\..\..\..\example-data"/>
    </context>
    
    <domain path="${domain}" name="greenfox-example-data">
        <folder foxpath="airports" id="airportsFolderShape">
            <targetSize countMsg="Missing folder: airports" count="1"/>            
            <file foxpath="airports.xml" id="airportsFileShape">
                <targetSize countMsg="Missing file: airports.xml" count="1"/>
                <xpath expr="/airports/airport[not(code)]/count(@*)"
                       useDatatype="xs:integer"
                       eq="1"
                       eqMsg="Not expected number of attributes"
                       minCount="2"
                       minCountMsg="Missing child elements of root element"/>
            </file>
        </folder>
    </domain>

</greenfox>

