<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    Demonstrates the use of recursive link targets. For each XSD in the OpenTravel repository,
    the target consists of all XSDs included, recursively. The resources are contained in an
    archive.
    
    For some basic facts about link targets, see `link-targets.gfox.xml`
-->
<greenfox greenfoxURI="http://www.greenfox.org/ns/schema-examples/link-targets.recursive.opentravel.archive"
    xmlns="http://www.greenfox.org/ns/schema">
    
    <context>
        <field name="domain" value="\projects\xsdbase"/>/>
    </context>
    
    <linkDef name="includes"
             hrefXP="/xs:schema/xs:include/@schemaLocation"
             recursive="true">
        <constraints resolvable="true"
                     resolvableMsg="Recursive includes could not be resolved"/>
    </linkDef>
    
    <domain path="${domain}" name="greenfox-example-data">
        <folder foxpath="archives\OpenTravel.zip\#archive#\OpenTravel\OpenTravel_2017B_XML" id="xsdFolderShape">
            <targetSize countMsg="Missing folder: OpenTravel XSDs" count="1"/>            
            <file foxpath="OTA_AirAvail*.xsd" id="xsdFileShape">
                <file linkName="includes" id="xsdFileShape">
                    <targetSize count="6" minCountMsg="Not expected number of link targets"/>
                    <xpath expr="/xs:schema/@elementFormDefault"
                           eq="qualified"
                           count="1"/>
                </file>
            </file>
        </folder>
    </domain>
    
</greenfox>
