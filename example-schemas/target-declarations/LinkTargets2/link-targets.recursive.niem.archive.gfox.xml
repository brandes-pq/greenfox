<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    Demonstrates the use of recursive link targets. The targets are the XSDs directly
    or indirectly imported by a root schema. All resources are contained by an archive.
    
    For some basic facts about link targets, see `link-targets.gfox.xml`
-->

<greenfox greenfoxURI="http://www.greenfox.org/ns/schema-examples/link-targets-recursive.in-archive/niem"
    xmlns="http://www.greenfox.org/ns/schema">
    
    <context>
        <field name="domain"/>
    </context>
    
    <linkDef name="imports"
        hrefXP="/xs:schema/xs:import/@schemaLocation" 
        recursive="true" >
        <constraints resolvable="true"
            resolvableMsg="Target links could not be resolved"/>
    </linkDef>
    
    <domain path="${domain}" name="greenfox-example-data">
        <folder foxpath="archives\niem-4.2.zip\#archive#\niem-4.2\niem\domains" id="niemCoreFolderShape">
            <targetSize countMsg="Missing folder: domains" count="1"/>            
            <file foxpath=".\\agriculture.xsd" id="intelligenceFileShape">
                <file linkName="imports" id="niemCoreFileShape">
                    <targetSize count="27" countMsg="Not expected number of link targets"/>
                    <xpath expr="/xs:schema/@targetNamespace"
                        exists="true"
                        existsMsg="Missing tns"/>
                </file>
            </file>
        </folder>
    </domain>
    
</greenfox>
